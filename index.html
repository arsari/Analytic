<!DOCTYPE html>
<html lang="en-US">

  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="shortcut icon" type="image/x-icon" sizes="16x16" href="favicon.ico" />
    <script src="https://kit.fontawesome.com/495a52ab3e.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto&display=swap">
    <link rel="stylesheet" href="style.css" />
    <title>AnalyticsWeb | Arsari</title>
    <!-- dataLayers init -->
    <script type="text/javascript">
      window.dataLayer = window.dataLayer || [];
      window.dataLayer.push({
        page_title: document.querySelector('title').innerText,
        page_name: 'Web Analytics Implementation - Home Page',
        page_author: 'Arturo Santiago-Rivera',
        author_email: 'asantiago@arsari.com',
        content_group: 'Implementation',
        content_type: 'Playground',
        language_code: 'en-US',
        event_timestamp: String(new Date().getTime()), // milliseconds
        // user properties
        logged_in: false,
        user_id: localStorage.UUID ?? 'guest',
      });
    </script>
    <!-- END: dataLayers init -->
    <!--Google Tag Manager-->
    <script>
      (function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({
          'gtm.start': new Date().getTime(),
          event: 'gtm.js',
        });
        const f = d.getElementsByTagName(s)[0];
        const j = d.createElement(s);
        const dl = l !== 'dataLayer' ? `&l=${l}` : '';
        j.async = true;
        j.src = `https://www.googletagmanager.com/gtm.js?id=${i}${dl}`;
        f.parentNode.insertBefore(j, f);
      })(window, document, 'script', 'dataLayer', 'GTM-59FGRVM');
    </script>
    <!-- End Google Tag Manager -->
    <!-- Tracking Variables Setup -->
    <script type="text/javascript">
      const setTealiumEnv =
        location.search.indexOf('dev') === 1 ? 'dev' : location.search.indexOf('qa') === 1 ? 'qa' : 'prod';
      const tealiumEnv = document.location.host.includes('127.0.0.1') ? 'dev/qa' : setTealiumEnv;
      const ga4Prop = tealiumEnv !== 'prod' ? 'G-0Q482J3LCH' : 'G-K9GKNM79XW';
      const gtmContainer = 'GTM-59FGRVM';

      /* Adobe Launch */
      let alaunch;
      let alaunchEnv;
      if (tealiumEnv !== 'prod') {
        alaunch = 'https://assets.adobedtm.com/a5bd983fc228/a715fbe791c6/launch-fbe47ad2001a-development.min.js';
        alaunchEnv = 'development';
      } else {
        alaunch = 'https://assets.adobedtm.com/a5bd983fc228/a715fbe791c6/launch-cfa4016bf67d.min.js';
        alaunchEnv = 'production';
      }
      const script = document.createElement('script');
      script.type = 'text/javascript';
      script.src = alaunch;
      script.async = true;
      document.head.appendChild(script);

      const ids = { Env: tealiumEnv, GA4: ga4Prop, GTM: gtmContainer, Launch: alaunchEnv, userID: dataLayer[0].user_id };
      console.table(ids);
    </script>
    <!-- END Tracking Variables Setup -->
  </head>

  <body>
    <!-- utag data object init -->
    <script type="text/javascript">
      const utag_data = {
        page_title: document.querySelector('title').innerText,
        page_name: 'Web Analytics Implementation - Home Page',
        page_author: 'Arturo Santiago-Rivera',
        author_email: 'asantiago@arsari.com',
        content_group: 'Implementation',
        content_type: 'Playground',
        language_code: 'en-US',
        event_timestamp: String(new Date().getTime()), // milliseconds
        // user properties
        logged_in: false,
        user_id: localStorage.UUID ?? 'guest',
        custom_user_id: localStorage.UUID ?? 'guest',
      };
    </script>
    <!-- END: utag data object init -->
    <!-- Tealium IQ Loading script asynchronously -->
    <script type="text/javascript">
      (function (a, b, c, d) {
        a = `https://tags.tiqcdn.com/utag/blastam/arsari-training/${setTealiumEnv}/utag.js`;
        b = document;
        c = 'script';
        d = b.createElement(c);
        d.src = a;
        d.type = `text/java${c}`;
        d.async = true;
        a = b.getElementsByTagName(c)[0];
        a.parentNode.insertBefore(d, a);
      })();
    </script>
    <!-- END: Tealium IQ Loading script asynchronously -->
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-59FGRVM" height="0" width="0"
        style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
    <header>
      <div class="headings">
        <h1>
          AnalyticsWeb | ARSARI
          <span class="github-badges">
            <img
              src="https://img.shields.io/github/last-commit/arsari/AnalyticsWeb?color=orange&style=flat-square&logo=github"
              alt="GitHub Last Commit" title="Source Code Last Update" />
            <img src="https://img.shields.io/github/v/tag/arsari/AnalyticsWeb?logo=github&sort=semver&style=flat-square"
              alt="GitHub tag (latest SemVer)" title="Source Code Current Version" />
          </span>
        </h1>
        <h3>
          Playground to explore analytics implementation on a web data stream for Google Analytics 4 (GA4) through GTM
          and Adobe Analytics (AA) through Tealium IQ. We use Adobe Launch as experimental tool not fully
          implemented.
        </h3>
        <span class="github-banner" title="Github Repository">
          <a id="github" name="action" href="https://github.com/arsari/AnalyticsWeb" rel="noopener nofollow"
            target="_blank">GitHub</a>
        </span>
      </div>
      <nav class="flex">
        <button id="login" name="action" class="button" type="button" title="Login Event">
          <span class="text">Sign In</span>
          <i class="fa-solid fa-check icon"></i>
        </button>
        <a id="extlink" name="action" class="button" href="https://arsari.wpengine.com" rel="noopener nofollow"
          target="_blank" title="Outbound Link Event">
          <span class="text">Outbound Link</span>
          <i class="fa-solid fa-check icon"></i>
        </a>
        <a id="intlink" name="action" class="button" href="internal.html" rel="noopener nofollow" target="_blank"
          title="Internal Link Event">
          <span class="text">Internal Link</span>
          <i class="fa-solid fa-check icon"></i>
        </a>
        <button id="download" name="action" class="button" type="button" title="Download Event">
          <span class="text">Download</span>
          <i class="fa-solid fa-check icon"></i>
        </button>
        <button id="video" name="action" class="button" type="button" title="Video Events">
          <span class="text">Video</span>
          <i class="fa-solid fa-check icon"></i>
        </button>
        <button id="email" name="action" class="button" type="button" title="Generate Lead Event">
          <span class="text">Email</span>
          <i class="fa-solid fa-check icon"></i>
        </button>
        <button id="phone" name="action" class="button" type="button" title="Generate Lead Event">
          <span class="text">Phone</span>
          <i class="fa-solid fa-check icon"></i>
        </button>
        <button id="ecommerce-modal" name="action" class="button" type="button" title="Ecommerce Funnel Events">
          <span class="text">Ecommerce Funnel</span>
          <i class="fa-solid fa-check icon"></i>
        </button>
        <button id="form-modal" name="action" class="button" type="button" title="Form Event">
          <span class="text">Form</span>
          <i class="fa-solid fa-check icon"></i>
        </button>
        <button id="search-modal" name="action" class="button" type="button" title="Search Event">
          <span class="text">Search</span>
          <i class="fa-solid fa-check icon"></i>
        </button>
        <button id="logout" name="action" class="button" type="button" title="Log Out Event">
          <span class="text">Sign Out</span>
          <i class="fa-solid fa-check icon"></i>
        </button>
      </nav>
    </header>
    <main>
      <section class="searchModal">
        <div class="search-modal-content">
          <button id="search-close" name="action" class="close-x" title="Close Search Modal">Close</button>
          <div class="search-wrap">
            <div class="searchBar">
              <input type="text" class="searchInput" name="searchTerm" placeholder="Enter keyword or phrase not PII">
              <button id="search" type="submit" name="action" class="searchButton" title="Click to capture keyword">
                <i class="fa fa-search"></i>
              </button>
            </div>
          </div>
        </div>
      </section>
      <section class="formModal">
        <div class="form-modal-content">
          <button id="form-close" name="action" class="close-x" title="Close Form Modal">Close</button>
          <div class="form-wrap">
            <form>
              <label for="fname">First Name<span>*</span>:</label>
              <input id="fname" type="text" class="formInput" placeholder="Enter your first name" required>
              <label for="profession">Profession<span>*</span>:</label>
              <input id="profession" type="text" class="formInput" placeholder="Enter your profession" required>
              <button id="form" type="submit" name="action" class="button form-btn" title="Submit Form">
                <span class="text">Let's Talk</span>
              </button>
            </form>
          </div>
          <div class="ty-message-wrap">
            <p id="thank-you-message"></p>
          </div>
        </div>
      </section>
      <section class="ecommerceModal">
        <div class="ecommerce-modal-content">
          <button id="ecommerce-cancel" name="action" class="close-x" title="Cancel Ecommerce Modal">Cancel</button>
          <div class="add-to-cart-wrap">
            <div>
              <h2>Select Products:</h2>
              <button id="productList-1" class="accordion" name="action" title="Clothing Section">CLOTHING<i
                  class="fa fa-caret-down" style="margin-left: 10px;"></i></button>
              <div class="panel">
                <table>
                  <caption>Merchandise Store</caption>
                  <thead>
                    <tr>
                      <th>Product ID</th>
                      <th>Brand</th>
                      <th>Product Description</th>
                      <th>Color</th>
                      <th>Price</th>
                      <th>Quantity</th>
                    </tr>
                  </thead>
                  <tbody id="itemsList-1" name="itemsList"></tbody>
                </table>
              </div>
              <button id="productList-2" class="accordion" name="action" title="Footwear Section">FOOTWEAR<i
                  class="fa fa-caret-down" style="margin-left: 10px;"></i></button>
              <div class="panel">
                <table>
                  <caption>Merchandise Store</caption>
                  <thead>
                    <tr>
                      <th>Product ID</th>
                      <th>Brand</th>
                      <th>Product Description</th>
                      <th>Color</th>
                      <th>Price</th>
                      <th>Quantity</th>
                    </tr>
                  </thead>
                  <tbody id="itemsList-2" name="itemsList"></tbody>
                </table>
              </div>
              <button id="add_to_cart" type="submit" name="action" class="button ecommerce-btn" title="Add to Cart">
                <span class="text">Add to Cart</span>
              </button>
            </div>
          </div>
          <div class="view-cart-wrap">
            <div>
              <h2>Products in Shopping Cart:</h2>
              <table>
                <caption>Merchandise Store</caption>
                <thead>
                  <tr>
                    <th>Product ID</th>
                    <th>Product Description</th>
                    <th>Price</th>
                    <th>Quantity</th>
                    <th>Total</th>
                  </tr>
                </thead>
                <tbody id="itemsSelectedRows"></tbody>
                <tfoot>
                  <tr>
                    <th colspan="4" style="text-align:right">Subtotal</th>
                    <th id="subtotal" style="text-align:right;"></th>
                  </tr>
                </tfoot>
              </table>
              <p id="coupon" class="coupon">Get 15%
                <input id="couponField" type="text" class="couponField" placeholder="Enter coupon code"
                  title="Enter: Summer Sale">
              </p>
              <button id="checkout1" type="submit" name="action" class="button ecommerce-btn2" title="Begin Checkout">
                <span class="text">Checkout</span>
              </button>
            </div>
          </div>
          <div class="checkout2-wrap">
            <div>
              <h2>Customer Information:</h2>
              <form id="customerAddress">
                <label for="sname">Full Name<span>*</span>:</label>
                <input id="sname" type="text" class="formInput" placeholder="Enter your full name" required>
                <label for="semail">Email<span>*</span>:</label>
                <input id="semail" type="email" class="formInput" placeholder="Enter your email" required>
                <label for="saddress">Address<span>*</span>:</label>
                <input id="saddress" type="text" class="formInput" placeholder="Enter your address" required>
                <label for="scity">City<span>*</span>:</label>
                <input id="scity" type="text" class="formInput" placeholder="Enter your city" required>
                <label for="sstate">State<span>*</span>:</label>
                <input id="sstate" type="text" class="formInput" placeholder="Enter your state" required>
                <label for="szip">Zip Code/Plus<span>*</span>:</label>
                <input id="szip" type="text" pattern="[0-9]{5}-[0-9]{4}" class="formInput"
                  placeholder="Enter your zip code/plus" required>
                <label for="sphone">Mobile Phone<span>*</span>:</label>
                <input id="sphone" type="tel" pattern="[0-9]{3}-[0-9]{3}-[0-9]{4}" class="formInput"
                  placeholder="Enter your mobile phone 000-000-0000" required>
                <h2>Shipping Method:</h2>
                <label for="shipping">Select Option<span>*</span>:</label>
                <select id="shipping" class="formInput">
                  <option value="standard">Standard</option>
                  <option value="express">Express (+ $10.00)</option>
                  <option value="overnight">Overnight (+ $20.00)</option>
                </select>
              </form>
              <button id="checkout2" type="submit" name="action" class="button ecommerce-btn" title="Add Shipping Info">
                <span class="text">Continue to Payment</span>
              </button>
            </div>
          </div>
          <div class="checkout3-wrap">
            <div>
              <h2>Credit Card Information</h2>
              <form id="customerPayment">
                <div id="cclogo" class="cclogo revert"></div>
                <label for="cardnum">Card Number<span>*</span>:</label>
                <input id="cardnum" type="number" class="formInput"
                  placeholder="Enter your credit card number no spaces" oninput="creditCardType()" required>
                <span id="errmsgnumber" class="result"></span>
                <label for="cardname">Name<span>*</span>:</label>
                <input id="cardname" type="text" class="formInput" placeholder="Enter name on card" required>
                <div class="expcvv">
                  <div class="exp">
                    <label for="cardexp">Expiration Date<span>*</span>:</label>
                    <input id="cardexp" type="text" class="formInput" placeholder="Enter expiration date [MM/YY]"
                      required>
                    <span id="errmsgdate" class="result"></span>
                  </div>
                  <div class="cvv">
                    <label for="cardcvv">CVV<span>*</span>:</label>
                    <input id="cardcvv" type="number" class="formInput" placeholder="Enter CVV" required>
                    <span id="errmsgcvv" class="result"></span>
                  </div>
                </div>
              </form>
              <button id="checkout3" type="submit" name="action" class="button ecommerce-btn" title="Add Payment Info">
                <span class="text">Continue to Summary</span>
              </button>
            </div>
          </div>
          <div class="summary-wrap">
            <div id="order-summary">
              <h2>Summary:</h2>
              <div class="customer">
                <div class="address">
                  <h3>Customer Shipping/Billing Address</h3>
                  <div class="info">
                    <p id="sbname" class="revert"></p>
                    <p id="sbemail" class="revert"></p>
                    <p id="sbaddress" class="revert"></p>
                    <p id="sbcity" class="revert"></p>
                    <p id="sbphone" class="revert"></p>
                  </div>
                </div>
                <div class="payment">
                  <h3>Customer Payment Information</h3>
                  <div class="info">
                    <div class="brand">
                      <p id="cctype" class="cclogo revert"></p>
                      <p id="ccbrand" class="revert"></p>
                    </div>
                    <p id="ccnumber" class="revert"></p>
                    <p class="revert">Exp: <span id="ccexp" class="revert"></span></p>
                  </div>
                </div>
              </div>
              <table>
                <caption>Merchandise Store</caption>
                <thead>
                  <tr>
                    <th>Product ID</th>
                    <th>Product Description</th>
                    <th>Price</th>
                    <th>Quantity</th>
                    <th>Total</th>
                  </tr>
                </thead>
                <tbody id="productRows"></tbody>
                <tfoot>
                  <tr>
                    <th colspan="4" style="text-align:right">Products SubTotal</th>
                    <th id="productsSubtotal" style="text-align:right;"></th>
                  </tr>
                  <tr>
                    <td colspan="4" style="text-align:right">Discount<span id="uCoupon"></span></td>
                    <td id="discountTotal" style="text-align:right;"></td>
                  </tr>
                  <tr>
                    <td colspan="4" style="text-align:right">Taxes</td>
                    <td id="taxes" style="text-align:right;"></td>
                  </tr>
                  <tr>
                    <td colspan="4" style="text-align:right">Shipping<span id="uShipping"></span></td>
                    <td id="shippingCost" style="text-align:right;"></td>
                  </tr>
                  <tr>
                    <th colspan="4" style="text-align:right">Order Total</th>
                    <th id="total" style="text-align:right;"></th>
                  </tr>
                </tfoot>
              </table>
              <button id="purchase" type="submit" name="action" class="button ecommerce-btn" title="Purchase">
                <span class="text">Purchase Now</span>
              </button>
            </div>
          </div>
          <div class="purchase-wrap">
            <div id="order-confirmation">
              <h2 style="text-align:center;">======== Order Confirmation ========</h2>
              <div class="customer">
                <div class="address">
                  <h3>Shipping Address</h3>
                  <div class="info">
                    <p id="ocname" class="revert"></p>
                    <p id="ocemail" class="revert"></p>
                    <p id="ocaddress" class="revert"></p>
                    <p id="occity" class="revert"></p>
                    <p id="ocphone" class="revert"></p>
                  </div>
                </div>
                <div class="transaction">
                  <h3>Transaction</h3>
                  <div class="info">
                    <p id="ocorderID" class="revert"></p>
                    <p id="occustomerID" class="revert"></p>
                    <p id="ocdate" class="revert"></p>
                    <p id="ocshipping" class="revert"></p>
                  </div>
                </div>
              </div>
              <div class="products">
                <table>
                  <caption>Merchandise Store</caption>
                  <thead>
                    <tr>
                      <th>Product ID</th>
                      <th>Product Description</th>
                      <th>Price</th>
                      <th>Quantity</th>
                      <th>Total</th>
                    </tr>
                  </thead>
                  <tbody id="ocproductRows"></tbody>
                  <tfoot>
                    <tr>
                      <th colspan="4" style="text-align:right">Products SubTotal</th>
                      <th id="ocproductsSubtotal" style="text-align:right;"></th>
                    </tr>
                    <tr>
                      <td colspan="4" style="text-align:right">Discount<span id="ocCoupon"></span></td>
                      <td id="ocdiscountTotal" style="text-align:right;"></td>
                    </tr>
                    <tr>
                      <td colspan="4" style="text-align:right">Taxes</td>
                      <td id="octaxes" style="text-align:right;"></td>
                    </tr>
                    <tr>
                      <td colspan="4" style="text-align:right">Shipping<span id="ocShipping"></span></td>
                      <td id="ocshippingCost" style="text-align:right;"></td>
                    </tr>
                    <tr>
                      <th colspan="4" style="text-align:right">Order Total</th>
                      <th id="octotal" style="text-align:right;"></th>
                    </tr>
                  </tfoot>
                </table>
              </div>
              <div class="customer">
                <div class="payment">
                  <h3>Payment Information</h3>
                  <div class="info">
                    <div class="brand">
                      <p id="occtype" class="cclogo revert"></p>
                      <p id="occbrand" class="revert"></p>
                    </div>
                    <div class="detail">
                      <p id="occnumber" class="revert"></p>
                      <p class="revert">Exp: <span id="occexp" class="revert"></span></p>
                      <p id="occname" class="revert"></p>
                    </div>
                  </div>
                </div>
              </div>
              <button id="refund" type="submit" name="action" class="refund-btn" title="Order Refund">
                <span class="text">Refund Order</span>
              </button>
              <button id="ecommerce-end" type="submit" name="action" class="button ecommerce-btn3"
                title="Close Ecommerce Funnel">
                <span class="text">Close Funnel</span>
              </button>
            </div>
          </div>
          <div class="refund-wrap">
            <div id="refund-confirmation">
              <h2 style="text-align:center;">======== Refund Confirmation ========</h2>
              <div class="customer2">
                <div class="transaction">
                  <h3>Transaction</h3>
                  <div class="info">
                    <p id="rcorderID" class="revert"></p>
                    <p id="rccustomerID" class="revert"></p>
                    <p id="rcdate" class="revert"></p>
                    <p id="rcshipping" class="revert"></p>
                  </div>
                </div>
              </div>
              <div class="products">
                <table>
                  <caption>Merchandise Store</caption>
                  <thead>
                    <tr>
                      <th>Product ID</th>
                      <th>Product Description</th>
                      <th>Price</th>
                      <th>Quantity</th>
                      <th>Total</th>
                    </tr>
                  </thead>
                  <tbody id="rcproductRows"></tbody>
                  <tfoot>
                    <tr>
                      <th colspan="4" style="text-align:right">Products SubTotal</th>
                      <th id="rcproductsSubtotal" style="text-align:right;"></th>
                    </tr>
                    <tr>
                      <td colspan="4" style="text-align:right">Discount</td>
                      <td id="rcdiscountTotal" style="text-align:right;"></td>
                    </tr>
                    <tr>
                      <td colspan="4" style="text-align:right">Taxes</td>
                      <td id="rctaxes" style="text-align:right;"></td>
                    </tr>
                    <tr>
                      <td colspan="4" style="text-align:right">Shipping</td>
                      <td id="rcshippingCost" style="text-align:right;"></td>
                    </tr>
                    <tr>
                      <th colspan="4" style="text-align:right">Order Total</th>
                      <th id="rctotal" style="text-align:right;"></th>
                    </tr>
                  </tfoot>
                </table>
              </div>
              <button id="ecommerce-end-2" type="submit" name="action" class="button ecommerce-btn4"
                title="Close Ecommerce Funnel">
                <span class="text">Close Funnel</span>
              </button>
            </div>
          </div>

        </div>
      </section>
      <section id="json"></section>
    </main>
    <footer></footer>
    <script type="text/javascript" src="function.min.js"></script>
    <script type="text/javascript">
      /**
       * Populate section element with initial data layer object
       */
      document.querySelector('#json').innerHTML += `<p><em>Initial dataLayer.push and utag_data</em></p><pre>${JSON.stringify(
        window.dataLayer.at(0).event === 'initData' ? window.dataLayer.at(0) : window.dataLayer.at(-1),
        undefined,
        2,
      )}</pre>`;

      /**
       * Scroll to last child element of section tag and highlight (focus) it
       */
      document.querySelector('#json').lastElementChild.scrollIntoView();
      document.querySelector('#json').lastElementChild.className = 'highlight';
    </script>
  </body>

</html>
