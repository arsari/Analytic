function displayJSON(status){const userLogged=status?"<span>User Logged</span>":"";document.querySelector("#json").innerHTML+=`<p><em>dataLayer.push and utag.link [${window.dataLayer.length}]</em>${userLogged}</p><pre>${JSON.stringify(window.dataLayer.at(-1),void 0,2)}</pre>`,document.querySelectorAll("pre").forEach(e=>{e.className="normal"}),document.querySelector("#json").lastElementChild.scrollIntoView(),document.querySelector("#json").lastElementChild.className="highlight"}const checkKeyPresenceInArray=key=>window.dataLayer.some(obj=>Object.keys(obj).includes(key)),headerHeight=document.querySelector("header").offsetHeight;document.querySelector("section").style=`margin-top: ${headerHeight+25}px`,document.querySelector("footer").innerHTML=`<span class="env">TealiumIQ->[\n  <span class="prop">${tealiumEnv}</span> ] | GA4->[ <span class="prop">${ga4Prop}</span> ] | GTM->[ <span class="prop">${gtmContainer}</span> ]\n  </span><span class="me">Coded with &hearts; by ARSARI</span>`;const btnClick=document.querySelectorAll("button");window.dataLayer=window.dataLayer||[];const userID=`U-${Math.floor(1e4*Math.random()+1)}`,date=new Date;let vs=!1,vc=!0;btnClick.forEach(e=>{e.addEventListener("click",()=>{const isKeyPresent=checkKeyPresenceInArray("logged_in");let logged=!!isKeyPresent&&window.dataLayer.at(-1).logged_in,ui=logged?userID:"guest";if("purchase"===e.id){const transactionID=`T-${Math.floor(1e4*Math.random())}`,itemPrice=Math.floor(100*Math.random()+1),itemQty=Math.floor(30*Math.random()+1),itemDiscount=Number((.15*itemPrice).toFixed(2)),total=Number(((itemPrice-itemDiscount)*itemQty).toFixed(2));window.dataLayer.push({ecommerce:null}),utag.link({ecommerce:null}),displayJSON(logged),window.dataLayer.push({event:e.id,event_type:"conversion",button_text:e.innerText,ecommerce:{transaction_id:transactionID,affiliation:"Merchandise Store",value:total,tax:Number((.07*total).toFixed(2)),shipping:Number((.12*total).toFixed(2)),currency:"USD",coupon:"SUMMER_SALE",items:[{item_id:"SKU_12345",item_name:"Stan and Friends Tee",affiliation:"Merchandise Store",coupon:"SUMMER_FUN",currency:"USD",discount:itemDiscount,index:0,item_brand:"Google",item_category:"Apparel",item_category2:"Adult",item_category3:"Shirts",item_category4:"Crew",item_category5:"Short sleeve",item_list_id:"related_products",item_list_name:"Related Products",item_variant:"green",location_id:"ChIJIQBpAG2ahYAR_6128GcTUEo",price:itemPrice,quantity:itemQty}]},logged_in:logged,user_id:ui}),utag.link({event:e.id,event_type:"conversion",button_text:e.innerText,ecommerce:{transaction_id:transactionID,affiliation:"Merchandise Store",value:total,tax:Number((.07*total).toFixed(2)),shipping:Number((.12*total).toFixed(2)),currency:"USD",coupon:"SUMMER_SALE",items:[{item_id:"SKU_12345",item_name:"Stan and Friends Tee",affiliation:"Merchandise Store",coupon:"SUMMER_FUN",currency:"USD",discount:itemDiscount,index:0,item_brand:"Google",item_category:"Apparel",item_category2:"Adult",item_category3:"Shirts",item_category4:"Crew",item_category5:"Short sleeve",item_list_id:"related_products",item_list_name:"Related Products",item_variant:"green",location_id:"ChIJIQBpAG2ahYAR_6128GcTUEo",price:itemPrice,quantity:itemQty}]},logged_in:logged,user_id:ui}),displayJSON(logged)}else{let en,cm,cc,val,vt,vp,vct,vd,vi,lu;if("email"!==e.id&&"phone"!==e.id&&"form"!==e.id||(en="generated_lead",cc="USD"),"email"===e.id&&(cm="email",val=50),"phone"===e.id&&(cm="phone",val=25),"form"===e.id&&(cm="form filled",val=100),"download"===e.id&&(en="file_download"),"video"===e.id&&(vt="Stan and Friends",vp="youtube",vc?(en="video_start",vs=!0,vi="Play",vct=0,vd=date.getUTCMilliseconds(),vc=!1):(en="video_complete",vs=!1,vi="Complete",vct=date.getMilliseconds(),vd=date.getUTCMilliseconds(),vc=!0)),"link"===e.id&&(en="link_click",lu=e.querySelector("a").href),"login"===e.id){if(logged)return void alert("Oops!\nI'm sorry you already Sign In.");logged=!0,ui=userID}if("logout"===e.id){if(!logged)return void alert("Oops!\nI'm sorry you need to Sign In first.");logged=!1}window.dataLayer.push({event:en||e.id,event_type:"generated_lead"===en?"conversion":"ui interaction",button_text:e.innerText,link_url:"link"===e.id?lu:void 0,link_text:"link"===e.id?e.innerText:void 0,contact_method:cm,file_extension:"download"===e.id?"pdf":void 0,file_name:"download"===e.id?"MyDownload":void 0,video_interaction:"video"!==e.id||!0!==vs&&!0!==vc?void 0:vi,video_title:vt,video_provider:vp,video_current_time:vct,video_duration:vd,form_submit:"form"===e.id?"MyForm":void 0,currency:cc,value:val,method:"login"===e.id?"Google":void 0,logged_in:logged,user_id:ui}),utag.link({event:en||e.id,event_type:"generated_lead"===en?"conversion":"ui interaction",button_text:e.innerText,link_url:"link"===e.id?lu:void 0,link_text:"link"===e.id?e.innerText:void 0,contact_method:cm,file_extension:"download"===e.id?"pdf":void 0,file_name:"download"===e.id?"MyDownload":void 0,video_interaction:"video"!==e.id||!0!==vs&&!0!==vc?void 0:vi,video_title:vt,video_provider:vp,video_current_time:vct,video_duration:vd,form_submit:"form"===e.id?"MyForm":void 0,currency:cc,value:val,method:"login"===e.id?"Google":void 0,logged_in:logged,user_id:ui}),displayJSON(logged)}})});