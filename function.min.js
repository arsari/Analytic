/**
 * Web Analytics Implementation Playground
 *
 * Main function file with the source code of the different events and parameters
 * that are being sent to Google Analytics and Tealium.
 *
 * @author:	Arturo Santiago-Rivera (asantiago@arsari.com)
 * @license: MIT License
 */
function displayJSON(e){let t="";e?t="<span>User Logged In</span>":"logout"===window.dataLayer.at(-1).event&&(t='<span class="alert">User Logged Out</span>'),document.querySelector("#json").innerHTML+=`<p><em>dataLayer.push and utag.link [${window.dataLayer.length}]</em>${t}</p><pre>${JSON.stringify(window.dataLayer.at(-1),void 0,2)}</pre>`,document.querySelectorAll("pre").forEach((e=>{e.className="normal",e.previousElementSibling.className="normal"}));const o=document.querySelector("#json");o.lastElementChild.scrollIntoView(),o.lastElementChild.className="highlight",o.lastElementChild.previousElementSibling.classList.remove("normal")}function searchModal(){sModal.classList.toggle("show-modal")}function formModal(){fModal.classList.toggle("show-modal")}function capitalize(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}function timeStamp(){const e=new Date,t=e.getTimezoneOffset(),o=t>=0?"-":"+",i=e=>{const t=Math.floor(Math.abs(e));return(t<10?"0":"")+t};return`${e.getFullYear()}-${i(e.getMonth()+1)}-${i(e.getDate())} T${i(e.getHours())}:${i(e.getMinutes())}:${i(e.getSeconds())}.${i(e.getMilliseconds())} UTC${o}${i(t/60)}:${i(t%60)}`}function errorEvent(e,t,o,i){alert(t);const n=String((new Date).getTime()),a=timeStamp();window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:`${e.id}_error`,event_type:"content tool",button_text:e.innerText,tag_name:e.tagName,error_message:t,alert_impression:!0,event_timestamp:n,custom_timestamp:a,logged_in:o,user_id:i}),utag.link({tealium_event:`${e.id}_error`,event_type:"content tool",button_text:e.innerText,tag_name:e.tagName,error_message:t,alert_impression:!0,event_timestamp:n,custom_timestamp:a,logged_in:o,user_id:i,custom_user_id:i}),displayJSON(o)}const headerHeight=document.querySelector("header").offsetHeight;document.querySelector("main").style=`margin-top: ${headerHeight+15}px`,document.querySelector("footer").innerHTML=`<span class="env">Env->[\n  <span class="prop">${tealiumEnv}</span> ] &boxV; GA4->[ <span class="prop">${ga4Prop}</span> ] &boxV; GTM->[ <span class="prop">${gtmContainer}</span> ]\n  </span><span class="me">Coded with &hearts; by ARSARI &boxV; Best view in Desktop</span>`;let logged=!1,vplay=!1,vstop=!0,vprogress=0;const vduration=300,sModal=document.querySelector(".searchModal"),fModal=document.querySelector(".formModal"),UUID=localStorage.UUID?localStorage.UUID:`U-${self.crypto.getRandomValues(new Uint32Array(1))}`,elemClick=document.querySelectorAll('[name="action"]');elemClick.forEach((e=>{e.addEventListener("click",(()=>{let t,o,i,n,a=logged?UUID:"guest";const r="Any Video Player",d="Walk in The Clouds",l="/videos/phantom",s=300;let m,c,u,v,_,g,p,y,f,h,S,w,b,M;if("purchase"===e.id){if(!logged)return w="ERROR: Please Sign In!",void errorEvent(e,w,logged,a);{const t=`T-${Math.floor(1e4*Math.random())}`,o=`SKU_${Math.floor(1e4*Math.random())}`,i=`SKU_${Math.floor(1e4*Math.random()+1)}`,n=Math.floor(200*Math.random()+1),r=Math.floor(30*Math.random()+1),d=Number((.15*n).toFixed(2)),l=Number(((n-d)*r*2).toFixed(2));b=String((new Date).getTime()),M=timeStamp(),window.dataLayer=window.dataLayer||[],window.dataLayer.push({ecommerce:null}),utag.link({ecommerce:null}),displayJSON(logged),window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:e.id,event_type:"conversion",button_text:e.innerText,tag_name:e.tagName,ecommerce:{transaction_id:t,affiliation:"Merchandise Store",coupon:"SUMMER_SALE",currency:"USD",shipping:Number((.12*l).toFixed(2)),tax:Number((.07*l).toFixed(2)),value:l,items:[{item_id:o,item_name:"Stan and Friends Tee",affiliation:"Merchandise Store",coupon:"SUMMER_FUN",currency:"USD",discount:d,index:0,item_brand:"MyCollection",item_category:"Apparel",item_category2:"Adult",item_category3:"Shirts",item_category4:"Crew",item_category5:"Short sleeve",item_list_id:"related_products",item_list_name:"Related Products",item_variant:"green",location_id:"ChIJIQBpAG2ahYAR_6128GcTUEo",price:n,quantity:r},{item_id:i,item_name:"Friends Pants",affiliation:"Merchandise Store",coupon:"SUMMER_FUN",currency:"USD",discount:d,index:1,item_brand:"MyCollection",item_category:"Apparel",item_category2:"Adult",item_category3:"Pants",item_category4:"Crew",item_category5:"Regular Fit",item_list_id:"related_products",item_list_name:"Related Products",item_variant:"blue",location_id:"ChIJIQBpAG2ahYAR_6128GcTUEo",price:n,quantity:r}]},event_timestamp:b,custom_timestamp:M,logged_in:logged,user_id:a}),utag.link({tealium_event:e.id,event_type:"conversion",button_text:e.innerText,tag_name:e.tagName,ecommerce:{transaction_id:t,affiliation:"Merchandise Store",coupon:"SUMMER_SALE",currency:"USD",shipping:Number((.12*l).toFixed(2)),tax:Number((.07*l).toFixed(2)),value:l,items:[{item_id:o,item_name:"Stan and Friends Tee",affiliation:"Merchandise Store",coupon:"SUMMER_FUN",currency:"USD",discount:d,index:0,item_brand:"MyCollection",item_category:"Apparel",item_category2:"Adult",item_category3:"Shirts",item_category4:"Crew",item_category5:"Short sleeve",item_list_id:"related_products",item_list_name:"Related Products",item_variant:"green",location_id:"ChIJIQBpAG2ahYAR_6128GcTUEo",price:n,quantity:r},{item_id:i,item_name:"Friends Pants",affiliation:"Merchandise Store",coupon:"SUMMER_FUN",currency:"USD",discount:d,index:1,item_brand:"MyCollection",item_category:"Apparel",item_category2:"Adult",item_category3:"Pants",item_category4:"Crew",item_category5:"Regular Fit",item_list_id:"related_products",item_list_name:"Related Products",item_variant:"blue",location_id:"ChIJIQBpAG2ahYAR_6128GcTUEo",price:n,quantity:r}]},event_timestamp:b,custom_timestamp:M,logged_in:logged,user_id:a,custom_user_id:a}),displayJSON(logged)}}else{if("email"!==e.id&&"phone"!==e.id||(t="generate_lead",i="USD","email"===e.id?(o="email",n=50):(o="phone",n=25)),"form-modal"===e.id&&(t="form_start",h="form modal open",formModal()),"form"===e.id){if(!e.previousElementSibling.value.trim())return w="ERROR: Form input can't be blank.",void errorEvent(e,w,logged,a);{const t=e.previousElementSibling.value.trim();if(t.match(/mailto:|tel:|^[\w\-.]+@[\w\-.]+/gi))return w="ERROR: PII not allowed in form input.",errorEvent(e,w,logged,a),void(e.previousElementSibling.value="");S=capitalize(t),e.previousElementSibling.value=""}t="form_submit",o="form filled",h="customer service",i="USD",n=100,formModal()}if("form-close"===e.id&&(t="form_modal_closed",formModal()),"download"===e.id){if(!logged)return w="ERROR: Please Sign In!",void errorEvent(e,w,logged,a);t="file_download",y=window.location.hostname,g=e.className}if("extlink"===e.id||"banner"===e.id){t="outbound_link",_=e.href;y=new URL(_).hostname,g=e.className?e.className:void 0,p=!0}if("intlink"===e.id){t="internal_link",_=e.href;y=new URL(_).hostname,g=e.className}"video"===e.id&&(vstop?(document.querySelector("#video .text").classList.add("playing"),document.querySelector("#video").style="background-color: red;",t="video_start",vplay=!0,vstop=!1,v="Play"):(document.querySelector("#video .text").classList.remove("playing"),document.querySelector("#video").style="background-color: #4caf50;",t="video_stop",vplay=!1,vstop=!0,v="Stop"),m=vprogress,u=`${Number((vprogress/300*100).toFixed(1))}%`);const x=setInterval((()=>{if(a=logged?UUID:"guest",vplay){vprogress+=1,b=String((new Date).getTime()),M=timeStamp();const e=()=>{window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:t,event_type:"content tool",video_duration:s,video_current_time:m,video_percent:u,video_status:v,video_provider:r,video_title:d,video_url:l,event_timestamp:b,custom_timestamp:M,logged_in:logged,user_id:a}),utag.link({tealium_event:t,event_type:"content tool",video_duration:s,video_current_time:m,video_percent:u,video_status:v,video_provider:r,video_title:d,video_url:l,event_timestamp:b,custom_timestamp:M,logged_in:logged,user_id:a,custom_user_id:a}),displayJSON(logged)};c=Number((vprogress/300*100).toFixed(1)),[10,25,50,75,90].includes(c)&&(t="video_progress",m=vprogress,u=`${c}%`,v=`Progress ${c}%`,e()),300===vprogress&&(document.querySelector("#video .text").classList.remove("playing"),document.querySelector("#video").style="background-color: #4caf50;",t="video_complete",m=vprogress,u=`${c}%`,v="Complete",vprogress=0,vplay=!1,vstop=!0,clearInterval(x),e())}}),1e3);if("Stop"===v&&clearInterval(x),"search-modal"===e.id){if(!logged)return w="ERROR: Please Sign In!",void errorEvent(e,w,logged,a);t="search_modal_opened",searchModal()}if("search"===e.id){if(!e.previousElementSibling.value.trim())return w="ERROR: Search term can't be blank.",void errorEvent(e,w,logged,a);{const t=e.previousElementSibling.value.trim();if(t.match(/mailto:|tel:|^[\w\-.]+@[\w\-.]+/gi))return w="ERROR: PII not allowed as search term.",errorEvent(e,w,logged,a),void(e.previousElementSibling.value="");f=capitalize(t),e.previousElementSibling.value=""}searchModal()}if("search-close"===e.id&&(t="search_modal_closed",searchModal()),"login"===e.id){if(logged)return w="ERROR: Oops! I'm sorry you already Sign In.",void errorEvent(e,w,logged,a);logged=!0,a=UUID,localStorage.logged=logged,localStorage.UUID=a}if("logout"===e.id){if(!logged)return w="ERROR: Oops! I'm sorry you already Sign Out.",void errorEvent(e,w,logged,a);logged=!1,localStorage.logged=logged}b=String((new Date).getTime()),M=timeStamp(),window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:t||e.id,button_text:"BUTTON"===e.tagName&&""!==e.innerText?e.innerText:void 0,contact_method:o,currency:i,event_type:/generate_lead|form_submit/.test(t)?"conversion":"ui interaction",file_extension:"download"===e.id?"pdf":void 0,file_name:"download"===e.id?"PDF_to_Download":void 0,form_destination:h,form_id:e.id.includes("form")?e.id:void 0,form_name:e.id.includes("form")?"User Profession Survey":void 0,form_submit_text:"form"===e.id?e.innerText:void 0,link_domain:y,link_classes:g,link_id:/extlink|intlink|download|banner/.test(e.id)?e.id:void 0,link_url:_,link_text:/extlink|intlink|download|banner/.test(e.id)?e.innerText:void 0,method:"login"===e.id?"Google":void 0,outbound:p,search_term:f,tag_name:e.tagName,value:n,video_duration:!e.id.includes("video")||!0!==vplay&&!0!==vstop?void 0:s,video_current_time:!e.id.includes("video")||!0!==vplay&&!0!==vstop?void 0:m,video_percent:!e.id.includes("video")||!0!==vplay&&!0!==vstop?void 0:u,video_status:!e.id.includes("video")||!0!==vplay&&!0!==vstop?void 0:v,video_provider:!e.id.includes("video")||!0!==vplay&&!0!==vstop?void 0:r,video_title:!e.id.includes("video")||!0!==vplay&&!0!==vstop?void 0:d,video_url:!e.id.includes("video")||!0!==vplay&&!0!==vstop?void 0:l,event_timestamp:b,custom_timestamp:M,logged_in:logged,user_id:a,user_profession:S}),utag.link({tealium_event:t||e.id,button_text:"BUTTON"===e.tagName&&""!==e.innerText?e.innerText:void 0,contact_method:o,currency:i,event_type:/generate_lead|form_submit/.test(t)?"conversion":"ui interaction",file_extension:"download"===e.id?"pdf":void 0,file_name:"download"===e.id?"PDF_to_Download":void 0,form_destination:h,form_id:e.id.includes("form")?e.id:void 0,form_name:e.id.includes("form")?"User Profession Survey":void 0,form_submit_text:"form"===e.id?e.innerText:void 0,link_domain:y,link_classes:g,link_id:/extlink|intlink|download|banner/.test(e.id)?e.id:void 0,link_url:_,link_text:/extlink|intlink|download|banner/.test(e.id)?e.innerText:void 0,method:"login"===e.id?"Google":void 0,outbound:p,search_term:f,tag_name:e.tagName,value:n,video_duration:!e.id.includes("video")||!0!==vplay&&!0!==vstop?void 0:s,video_current_time:!e.id.includes("video")||!0!==vplay&&!0!==vstop?void 0:m,video_percent:!e.id.includes("video")||!0!==vplay&&!0!==vstop?void 0:u,video_status:!e.id.includes("video")||!0!==vplay&&!0!==vstop?void 0:v,video_provider:!e.id.includes("video")||!0!==vplay&&!0!==vstop?void 0:r,video_title:!e.id.includes("video")||!0!==vplay&&!0!==vstop?void 0:d,video_url:!e.id.includes("video")||!0!==vplay&&!0!==vstop?void 0:l,event_timestamp:b,custom_timestamp:M,logged_in:logged,user_id:a,custom_user_id:a,user_profession:S}),displayJSON(logged)}document.querySelectorAll(".button").forEach((e=>{e.removeAttribute("disabled")})),e.setAttribute("disabled","")}))}));